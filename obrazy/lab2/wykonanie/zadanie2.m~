% zadanie 2
function nowyObraz = zadanie2(nazwa, skalaX, skalaY)
    %% 2. Wczytaj i wy?wietl obraz

    obraz = imread(nazwa);
    imshow(obraz);

    %% 3. Wsp??czynniki przekszta?cenia

    xNewScale = skalaX;
    yNewScale = skalaY;

    %% 4. Rozdzielczo?? nowego obrazu + nowy obraz

    [stareX, stareY] = size(obraz);
    noweX = floor(stareX * xNewScale);
    noweY = floor(stareY * yNewScale);

    nowyObraz = uint8(zeros(noweY, noweX));

    %% 5. przeforowanie przez obraz

    xStep = stareX / noweX;
    yStep = stareY / noweY;

    for pikselY = 0:(noweY - 1)
        for pikselX = 0:(noweX - 1)

    %% 6. najbli?szy s?siad        
            staryPikselX = round(pikselX * xStep);
            staryPikselY = round(pikselY * yStep);
            
            %% 7. przekraczanie zakresu
            if staryPikselX > stareX - 2;
                staryPikselX = stareX - 2;
            end
            if staryPikselY > stareY - 2;
                staryPikselY = stareY - 2;
            end
            
            A = [staryPikselY + 1, staryPikselX + 1];
            B = [staryPikselY + 1, staryPikselX + 2];
            C = [staryPikselY + 2, staryPikselX + 1];
            D = [staryPikselY + 2, staryPikselX + 2];
            
            M = [obraz(A(0), A(1)), obraz(D(0), D(1)) ; obraz(B(0), B(1)), obraz(C(0), C(1))];
            
            nowyObraz(pikselY+1, pikselX+1) = [1 - staryPikselX, staryPikselY];
        end
    end
    figure;
    imshow(nowyObraz);
end
